{% extends 'base.html' %}
{% load static %}
{% load custom_filters %}

{% block title %}üìà Godi≈°nji pregled{% endblock %}

{% block content %}
<style>
  table.attendance-table {
    border-collapse: collapse;
    width: 100%;
    margin-top: 20px;
    font-size: 14px;
  }

  .attendance-table th,
  .attendance-table td {
    border: 1px solid #ccc;
    text-align: center;
    padding: 6px;
  }

  .attendance-table th {
    background-color: #f2f2f2;
  }

  .status-–ì–æ { background-color: #d6f5d6; }
  .status-–î { background-color: #e6e6ff; }
  .status-–î—Å { background-color: #f0e6ff; }
  .status-–°–æ { background-color: #e0ffff; }
  .status-–ë–æ { background-color: #fff3cd; }
  .status-–°–ø { background-color: #d1ecf1; }
  .status-–õ–ø { background-color: #f9d6d5; }
  .status-–û–ø–ø { background-color: #ffe0e0; }
  .status-–ù { background-color: #fce5cd; }
  .status-–°–¥ { background-color: #fff; }
  .status-–û–æ { background-color: #fef9e7; }
  .status-–ù–æ { background-color: #e8f5e9; }
  .status-–û–ø { background-color: #fbe9e7; }
  .status-–†–æ–∫ { background-color: #d0f0c0; }
  .status-–ü–£ { background-color: #e0f7fa; }
  .status-–£–æ–î { background-color: #fffde7; }
  .status-–£–ø–ø { background-color: #fff3e0; }

  th, td {
    white-space: nowrap;
  }

  h2 {
    color: #1a73e8;
  }
</style>

<h2>üìà –ì–æ–¥–∏—à—ö–∏ –ø—Ä–µ–≥–ª–µ–¥ –ø—Ä–∏—Å—É—Å—Ç–≤–∞</h2>

<div class="table-responsive">
  <table class="attendance-table">
    <thead>
      <tr>
        <th>–†–µ–¥ –±—Ä.</th>
        <th>–ß–∏–Ω</th>
        <th>–ü—Ä–µ–∑–∏–º–µ –∏ –∏–º–µ</th>
        {% for status in svi_statusi %}
          <th>{{ status }}</th>
        {% endfor %}
        <th>‚àë</th>
      </tr>
    </thead>
    <tbody>
      {% for z, podaci in tabela.items %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td>{{ z.cin }}</td>
          <td>{{ z.ime_prezime }}</td>
          {% for status in svi_statusi %}
            {% with podaci.statusi|get_item:status as broj %}
              <td class="status-{{ status }}">
                {% if broj %}
                  {{ broj }} ({{ broj|div:podaci.ukupno|floatformat:0 }}%)
                {% else %}
                  -
                {% endif %}
              </td>
            {% endwith %}
          {% endfor %}
          <td>{{ podaci.ukupno }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
